<div [class]="'theme-wrapper ' + (theme$ | async)">
  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav #sidenav mode="push">
      <div class="branding">
        <img [src]="logo" width="48" height="48" />
        <span id="title">Mathis Garberg</span>
      </div>
      <mat-nav-list>
        <a
          mat-list-item
          *ngFor="let item of navigationSideMenu"
          [attr.aria-label]="item.label"
          [routerLink]="[item.link]"
          routerLinkActive="active"
          (click)="sidenav.close()"
        >
          {{ item.label | translate }}
        </a>
        <mat-divider></mat-divider>
        <a
          mat-list-item
          href="https://github.com/mathisGarberg"
          aria-label="Github"
          target="_blank"
          rel="noopener"
        >
          Github
        </a>
        <mat-divider></mat-divider>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content cdkScrollable>
      <div class="wrapper">
        <div
          class="toolbar"
          [style.position]="(stickyHeader$ | async) ? 'fixed' : 'inherit'"
          [class.mat-elevation-z4]="stickyHeader$ | async"
        >
          <mat-toolbar color="primary">
            <div class="container">
              <button
                mat-icon-button
                class="d-md-none"
                aria-label="bars"
                (click)="sidenav.open()"
              >
                <fa-icon icon="bars"></fa-icon>
              </button>

              <span
                [routerLink]="webFlowPaths.About"
                class="branding spacer center d-inline d-sm-none"
              >
                <img alt="logo" [src]="logo" width="48" height="48" />
              </span>
              <span
                routerLink=""
                class="branding spacer center d-none d-sm-inline d-md-none"
              >
                <img alt="logo" [src]="logo" width="48" height="48" />
              </span>
              <span routerLink="" class="branding spacer d-none d-md-inline">
                <img alt="logo" [src]="logo" width="48" height="48" />
              </span>

              <div style="float: right">
                <span class="d-none d-md-inline">
                  <button
                    mat-button
                    class="nav-button"
                    *ngFor="let item of navigation"
                    [routerLink]="[item.link]"
                    routerLinkActive="active"
                  >
                    {{ item.label | translate }}
                  </button>
                  <ng-container *appNoShellRender>
                    <ng-container
                      *ngIf="isAuthenticated$ | async; else showLoginButton"
                    >
                      <button
                        mat-button
                        class="nav-button"
                        [routerLink]="webFlowPaths.Admin"
                        routerLinkActive="active"
                      >
                        Admin Panel
                      </button>
                      <button
                        mat-button
                        class="nav-button"
                        (click)="onLogoutClick()"
                      >
                        Logout
                      </button>
                    </ng-container>
                    <ng-template #showLoginButton>
                      <button
                        mat-button
                        class="nav-button"
                        [routerLink]="webFlowPaths.Login"
                        routerLinkActive="active"
                      >
                        Login
                      </button>
                    </ng-template>
                  </ng-container>
                </span>

                <button
                  mat-icon-button
                  [routerLink]="webFlowPaths.Settings"
                  aria-label="Settings"
                  class="d-none d-sm-inline"
                >
                  <fa-icon icon="cog"></fa-icon>
                </button>

                <a
                  [matTooltip]="'app.about.view-profile' | translate"
                  aria-label="Github"
                  matdTooltipPosition="before"
                  mat-icon-button
                  class="link d-none d-sm-inline"
                  href="https://github.com/mathisGarberg"
                  rel="noopener"
                  target="_blank"
                >
                  <fa-icon icon="folder"></fa-icon>
                </a>

                <span *ngIf="language$ | async as language">
                  <mat-select
                    ngDefaultControl
                    [ngModel]="language"
                    aria-label="Languages"
                    (selectionChange)="onLanguageSelect($event)"
                  >
                    <mat-option
                      role="option"
                      *ngFor="let l of languages"
                      [value]="l"
                    >
                      {{ l.toUpperCase() }}
                    </mat-option>
                  </mat-select>
                </span>
              </div>
            </div>
          </mat-toolbar>
        </div>

        <div
          class="content"
          (@routeAnimations.done)="onAnimationComplete($event)"
          [@routeAnimations]="
            o.isActivated && o.activatedRoute.routeConfig.path
          "
        >
          <router-outlet #o="outlet"></router-outlet>
        </div>

        <app-carousel>
          <ng-container *ngFor="let item of items">
            <ng-container *appCarouselItem>
              <div class="item">{{ item.title }}</div>
            </ng-container>
          </ng-container>
        </app-carousel>

        <footer class="footer">
          <div class="row">
            <div class="col-sm-12 links">
              <a
                *ngFor="let mediaContent of mediaContents"
                [href]="mediaContent.link"
                [attr.aria-label]="mediaContent.name"
                target="_blank"
                rel="noopener"
              >
                <fa-icon [icon]="['fab', mediaContent.icon]"></fa-icon>
                <span>&nbsp; {{ mediaContent.name }}</span>
              </a>
            </div>
          </div>
          <div class="row">
            <div class="col-12 signature">
              &#169; <span class="year">{{ currentYear }}</span> - Mathis
              Garberg. Built with the MEAN-stack. A continuous work in progress.
            </div>
          </div>
        </footer>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>
